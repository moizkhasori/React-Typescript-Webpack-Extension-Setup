(()=>{"use strict";var e=function(e,t,s,c){return new(s||(s=Promise))((function(r,i){function o(e){try{a(c.next(e))}catch(e){i(e)}}function n(e){try{a(c.throw(e))}catch(e){i(e)}}function a(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(o,n)}a((c=c.apply(e,t||[])).next())}))};chrome.runtime.onMessage.addListener(((t,s,c)=>"checkWebsiteStatus"===t.task?(e(void 0,void 0,void 0,(function*(){try{const e=((yield chrome.storage.local.get("blocked_websites")).blocked_websites||[]).some((e=>e.url===t.url));c({blocked:e})}catch(e){c({error:!0,errorObject:e})}})),!0):"blockWebsite"===t.task?(e(void 0,void 0,void 0,(function*(){try{yield chrome.scripting.executeScript({target:{tabId:t.tabId},files:["insert.js"]}),yield chrome.scripting.insertCSS({target:{tabId:t.tabId},files:["insert.css"]}),c({success:!0})}catch(e){c({success:!1,error:e})}})),!0):"unblockWebsite"===t.task?(e(void 0,void 0,void 0,(function*(){try{yield chrome.tabs.reload(t.tabId),c({success:!0})}catch(e){c({success:!1,error:e})}})),!0):"checkAllWebsitesStatus"===t.task?(e(void 0,void 0,void 0,(function*(){try{const e=(yield chrome.storage.local.get("blocked_websites")).blocked_websites||[];console.log(e,"from background allstatus");const t=s.tab.url,r=s.tab.id;if(t.includes("chrome://"))return c({success:!1,message:"internal chrome url!"}),!0;e.some((e=>e.url===t))?(yield chrome.scripting.executeScript({target:{tabId:r},files:["insert.js"]}),yield chrome.scripting.insertCSS({target:{tabId:r},files:["insert.css"]}),c({success:!0})):c({success:!1,message:"URL not Blocked"})}catch(e){c({success:!1,error:e})}})),!0):void 0))})();